import{s as g}from"./index-Dj_NDL5s.js";import{u as se,a as oe,g as ie,c as j,o as de,x as f,r as w,A as u,d as c,e as h,f as a,w as t,p as A,j as s,i as p,m as o,t as i,l as _,F,s as W,V as re}from"./index-Dcr4vpJk.js";const ue={class:"page-div"},ce={class:"card-header"},me={class:"card-header"},pe={key:0},ge={style:{"margin-top":"20px"}},fe={class:"card-header"},_e={key:0},he={style:{"margin-top":"20px"}},be={class:"card-header"},ve={key:0},ye={style:{"margin-top":"20px"}},ke=re({name:"settingsPlayer"}),Le=Object.assign(ke,{setup(we){const{t:r}=se(),{isMobile:C}=oe(),N=ie(),b=j(()=>N.isDark),I=j(()=>N.language);de(()=>{m()});const m=(e=!1)=>{g.player.list.get().then(l=>{z.value=l.data.players,v.value=[];for(let d of l.data.adminList)d!==""&&v.value.push(d);y.value=[];for(let d of l.data.blockList)d!==""&&y.value.push(d);k.value=[];for(let d of l.data.whiteList)d!==""&&k.value.push(d);if(e){let d;I.value==="zh"?d="刷新成功":d="Refresh Success",f(d)}})},T=w("players"),z=w([]),v=w([]),y=w([]),k=w([]),M=e=>{for(let l of v.value)if(l===e)return!0},U=e=>{for(let l of y.value)if(l===e)return!0},E=e=>{for(let l of k.value)if(l===e)return!0},K=e=>{switch(e.type){case"admin":O(e.uid);break;case"block":q(e.uid);break;case"white":H(e.uid);break;case"kick":Q(e.uid);break}},O=e=>{g.player.addAdmin.post({uid:e}).then(l=>{f(l.message),m()})},R=e=>{g.player.deleteAdmin.post({uid:e}).then(l=>{f(l.message),m()})},q=e=>{g.player.addBlock.post({uid:e}).then(l=>{f(l.message),m()})},G=e=>{g.player.deleteBlock.post({uid:e}).then(l=>{f(l.message),m()})},H=e=>{g.player.addWhite.post({uid:e}).then(l=>{f(l.message),m()})},J=e=>{g.player.deleteWhite.post({uid:e}).then(l=>{f(l.message),m()})},Q=e=>{g.player.kick.post({uid:e}).then(l=>{f(l.message)})};return(e,l)=>{const d=u("el-button"),B=u("el-table-column"),X=u("arrow-down"),Y=u("el-icon"),$=u("el-dropdown-item"),Z=u("el-dropdown-menu"),ee=u("el-dropdown"),te=u("el-table"),L=u("el-result"),x=u("el-card"),D=u("el-tab-pane"),S=u("el-alert"),V=u("el-tag"),le=u("el-tabs"),ae=u("el-col"),ne=u("el-row");return c(),h("div",ue,[a(ne,{gutter:10},{default:t(()=>[a(ae,{lg:24,md:24,sm:24,span:24,xs:24,style:{"margin-top":"10px"}},{default:t(()=>[a(le,{modelValue:T.value,"onUpdate:modelValue":l[4]||(l[4]=n=>T.value=n)},{default:t(()=>[a(D,{label:e.$t("setting.players"),name:"players"},{default:t(()=>[a(x,{shadow:"never",style:A(s(C)?"min-height: 500px":"min-height: 700px")},{header:t(()=>[p("div",ce,[o(i(s(r)("setting.players"))+" ",1),p("div",null,[a(d,{size:"default",onClick:l[0]||(l[0]=n=>m(!0))},{default:t(()=>[o(i(s(r)("setting.refresh")),1)]),_:1})])])]),default:t(()=>[z.value?(c(),_(te,{key:0,data:z.value,border:"",style:{width:"100%"},size:"small"},{default:t(()=>[a(B,{prop:"nickName",label:e.$t("setting.nickName")},null,8,["label"]),a(B,{prop:"uid",label:"UID"}),a(B,{prop:"actions",label:e.$t("setting.button.actions")},{default:t(n=>[a(ee,{onCommand:K,trigger:"hover"},{dropdown:t(()=>[a(Z,null,{default:t(()=>[a($,{command:{type:"admin",uid:n.row.uid},disabled:M(n.row.uid)},{default:t(()=>[o(i(s(r)("setting.addAdmin")),1)]),_:2},1032,["command","disabled"]),a($,{command:{type:"block",uid:n.row.uid},disabled:U(n.row.uid)},{default:t(()=>[o(i(s(r)("setting.addBlock")),1)]),_:2},1032,["command","disabled"]),a($,{command:{type:"white",uid:n.row.uid},disabled:E(n.row.uid)},{default:t(()=>[o(i(s(r)("setting.addWhite")),1)]),_:2},1032,["command","disabled"]),a($,{command:{type:"kick",uid:n.row.uid},disabled:M(n.row.uid),divided:""},{default:t(()=>[o(i(s(r)("setting.kick")),1)]),_:2},1032,["command","disabled"])]),_:2},1024)]),default:t(()=>[a(d,{link:"",type:"primary"},{default:t(()=>[o(i(s(r)("setting.button.actions")),1),a(Y,{class:"el-icon--right"},{default:t(()=>[a(X)]),_:1})]),_:1})]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data"])):(c(),_(L,{key:1,icon:"warning",title:e.$t("setting.noPlayersFound"),style:{"margin-top":"10%"}},null,8,["title"]))]),_:1},8,["style"])]),_:1},8,["label"]),a(D,{label:e.$t("setting.adminList"),name:"adminList"},{default:t(()=>[a(x,{shadow:"never",style:A(s(C)?"min-height: 500px":"min-height: 700px")},{header:t(()=>[p("div",me,[o(i(s(r)("setting.adminList"))+" ",1),p("div",null,[a(d,{size:"default",onClick:l[1]||(l[1]=n=>m(!0))},{default:t(()=>[o(i(s(r)("setting.refresh")),1)]),_:1})])])]),default:t(()=>[v.value.length>0?(c(),h("div",pe,[a(S,{effect:b.value?"light":"dark",type:"success",closable:!1},{default:t(()=>[o(i(s(r)("setting.tagCloseTip")),1)]),_:1},8,["effect"]),p("div",ge,[(c(!0),h(F,null,W(v.value,n=>(c(),_(V,{size:"large",closable:"",onClose:P=>R(n),effect:b.value?"light":"dark",style:{"margin-right":"5px","margin-top":"5px"}},{default:t(()=>[o(i(n),1)]),_:2},1032,["onClose","effect"]))),256))])])):(c(),_(L,{key:1,icon:"warning",title:e.$t("setting.noAdminFound"),style:{"margin-top":"10%"}},null,8,["title"]))]),_:1},8,["style"])]),_:1},8,["label"]),a(D,{label:e.$t("setting.blockList"),name:"blockList"},{default:t(()=>[a(x,{shadow:"never",style:A(s(C)?"min-height: 500px":"min-height: 700px")},{header:t(()=>[p("div",fe,[o(i(s(r)("setting.blockList"))+" ",1),p("div",null,[a(d,{size:"default",onClick:l[2]||(l[2]=n=>m(!0))},{default:t(()=>[o(i(s(r)("setting.refresh")),1)]),_:1})])])]),default:t(()=>[y.value.length>0?(c(),h("div",_e,[a(S,{effect:b.value?"light":"dark",type:"success",closable:!1},{default:t(()=>[o(i(s(r)("setting.tagCloseTip")),1)]),_:1},8,["effect"]),p("div",he,[(c(!0),h(F,null,W(y.value,n=>(c(),_(V,{size:"large",closable:"",onClose:P=>G(n),effect:b.value?"light":"dark",style:{"margin-right":"5px","margin-top":"5px"}},{default:t(()=>[o(i(n),1)]),_:2},1032,["onClose","effect"]))),256))])])):(c(),_(L,{key:1,icon:"warning",title:e.$t("setting.noBlockFound"),style:{"margin-top":"10%"}},null,8,["title"]))]),_:1},8,["style"])]),_:1},8,["label"]),a(D,{label:e.$t("setting.whiteList"),name:"whiteList"},{default:t(()=>[a(x,{shadow:"never",style:A(s(C)?"min-height: 500px":"min-height: 700px")},{header:t(()=>[p("div",be,[o(i(s(r)("setting.whiteList"))+" ",1),p("div",null,[a(d,{size:"default",onClick:l[3]||(l[3]=n=>m(!0))},{default:t(()=>[o(i(s(r)("setting.refresh")),1)]),_:1})])])]),default:t(()=>[k.value.length>0?(c(),h("div",ve,[a(S,{effect:b.value?"light":"dark",type:"success",closable:!1},{default:t(()=>[o(i(s(r)("setting.tagCloseTip")),1)]),_:1},8,["effect"]),p("div",ye,[(c(!0),h(F,null,W(k.value,n=>(c(),_(V,{size:"large",closable:"",onClose:P=>J(n),effect:b.value?"light":"dark",style:{"margin-right":"5px","margin-top":"5px"}},{default:t(()=>[o(i(n),1)]),_:2},1032,["onClose","effect"]))),256))])])):(c(),_(L,{key:1,icon:"warning",title:e.$t("setting.noWhiteFound"),style:{"margin-top":"10%"}},null,8,["title"]))]),_:1},8,["style"])]),_:1},8,["label"])]),_:1},8,["modelValue"])]),_:1})]),_:1})])}}});export{Le as default};
